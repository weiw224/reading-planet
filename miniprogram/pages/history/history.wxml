<!-- 历史记录页面 -->
<view class="page-history">
  <view class="nav-bar">
    <view class="nav-left" bindtap="goBack">
      <image src="/images/icons/arrow-left.png" mode="aspectFit" />
    </view>
    <text class="nav-title">阅读历史</text>
    <view class="nav-right"></view>
  </view>

  <scroll-view 
    class="main-content" 
    scroll-y
    bindscrolltolower="loadMore"
    lower-threshold="100"
  >
    <view class="history-list">
      <view 
        class="history-item"
        wx:for="{{historyList}}"
        wx:key="id"
        bindtap="viewDetail"
        data-id="{{item.id}}"
      >
        <view class="item-left">
          <image class="cover" src="{{item.article_cover}}" mode="aspectFill" />
        </view>
        <view class="item-content">
          <text class="title">《{{item.article_title}}》</text>
          <view class="meta">
            <text class="date">{{item.date_text}}</text>
            <text class="score">得分：{{item.score}}分</text>
          </view>
          <view class="tags">
            <text class="tag" wx:for="{{item.tags}}" wx:key="*this">{{item}}</text>
          </view>
        </view>
        <view class="item-right">
          <text class="accuracy">{{item.accuracy}}%</text>
          <text class="accuracy-label">正确率</text>
        </view>
      </view>
    </view>

    <view class="loading-more" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>

    <view class="no-more" wx:if="{{!hasMore && historyList.length > 0}}">
      <text>没有更多了</text>
    </view>

    <view class="empty-state" wx:if="{{!loading && historyList.length === 0}}">
      <image src="/images/empty-history.png" mode="aspectFit" />
      <text>还没有阅读记录</text>
      <button class="btn-start" bindtap="goReading">开始阅读</button>
    </view>
  </scroll-view>
</view>
